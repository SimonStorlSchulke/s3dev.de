<style>
    .explosions-wrapper {
        background: #020c18;
        margin: auto;
        width: 100%;
        height: 650px;
        color: #aaa;
        position: relative;
        overflow: hidden;
        font-size: 18px;
        user-select: none;
    }

    @keyframes explosion {
        0% {
            color: #000;
            opacity: 0;
        }

        10% {
            color: #20c3f5;
            opacity: 1;

        }

        20% {
            color: #fadd5f;
            opacity: 1;

        }

        50% {
            color: #e48d2b;
            opacity: 1;

        }

        50% {
            color: #771717;
            opacity: 1;

        }

        70% {
            color: #200b0b;
            opacity: 0.7;
        }

        100% {
            color: #00000000;
            opacity: 0;
        }
    }

    @keyframes explosionb {
        0% {
            opacity: 0.0
        }

        70% {
            opacity: 1.0
        }

        100% {
            opacity: 0.0
        }
    }

    .explosions-wrapper span {
        position: absolute;
        transform: translateX(-50%) translateY(-50%);
        pointer-events: none;
        font-family: monospace;
        font-weight: bold;
        White-space: nowrap;
        overflow: hidden;
        line-height: 1.2;
        color: #0000;
        opacity: 0;
        animation: explosion 3s linear;
        pointer-events: none;
        text-shadow: 0px 0px 20px #ff520e98;
        mix-blend-mode:lighten;
    }

    .explosions-wrapper p {
        text-align: center;
        padding-top: 300px;
        pointer-events: none;
    }
</style>

<div class="explosions-wrapper">
    <p>click anywhere</p>
</div>

<script>
    document.querySelector(".explosions-wrapper").addEventListener("click", boom);

    // for all calculations, horizontal ammound of chars must be double the ammount as vertically (because letters aint square)

    function boom(event) {
        event.target.querySelector("p")?.remove();
        const spawn = document.createElement("span");
        event.target.append(spawn);
        let divRect = event.target.getBoundingClientRect();
        const randomHue = randomInt(0, 360);
        spawn.style.filter = `hue-rotate(${randomHue}deg)`
        spawn.style.top = `${event.clientY - divRect.top}px`;
        spawn.style.left = `${event.clientX - divRect.left}px`;

        const maxRadius = randomInt(10, 50);
        const maxRingWidth = randomInt(8, 20);
        const noiseAmmount = randomInt(0, 30);


        let frame = 0;
        const animLength = randomInt(24, 40);
        const frameTimeMs = 80;
        const intervalID = setInterval(function () {

            const progress = frame / animLength;

            const radius = Math.ceil(Math.pow(progress, .6) * maxRadius);

            let str = generateCircle(radius, progress * maxRingWidth + 1, noiseAmmount);
            spawn.innerText = str;

            if (++frame === animLength) {
                window.clearInterval(intervalID);
                window.setTimeout(() => { spawn.remove() }, 500)
            }
        }, frameTimeMs);

    }

    String.prototype.replaceAt = function (index, replacement) {
        return this.substring(0, index) + replacement + this.substring(index + replacement.length);
    }

    function setCharAt(str, index, chr) {
        if (index > str.length - 1) return str;
        return str.substring(0, index) + chr + str.substring(index + 1);
    }

    function generateCircle(radius, width, noiseAmmount) {
        let str = generateCharGrid(radius);

        let trueIndex = 0;

        for (let i = 0; i < str.length; i++) {
            if (str[i] == "\n") {
                continue;
            };

            const randomNoise = (Math.random()-0.5) * noiseAmmount;

            const pos = getPosOfIndex(trueIndex, radius);
            const inCircle = isInRing(radius, pos.x, pos.y, width - randomNoise);

            if (!inCircle) str = str.replaceAt(i, "â€‰");

            trueIndex++;
        }
        return str;
    }

    const randomInt = (min, max) => {
        return Math.round(Math.random() * (max - min)) + min;
    }

    function generateCharGrid(radius) {
        let str = "";

        for (let i = 0; i < radius; i++) {
            let newLine = "";
            while (newLine.length < radius * 2 + 1) {
                newLine += randomBuzzWord();
            }
            str += newLine.substring(0, radius * 2) + "\n"
        }
    
        return str;
    }

    function getPosOfIndex(charIndex, radius) {
        return {
            x: charIndex % (radius * 2) + 0.5,
            y: Math.floor(charIndex / radius) + 0.5
        };
    };

    function isInRing(radius, x, y, thickness) {
        //same:
        centerX = radius;
        centerY = radius;
        const distToCenter = Math.sqrt((x - centerX) ** 2 + (y - centerY) ** 2);
        return distToCenter < radius - 1 && distToCenter > radius - (thickness + 1);
    }

    function randomChar() {
        const characters = 'abcdefghijklmnopqrstuvwxyz0123456789...........';
        return characters.charAt(Math.floor(Math.random() * characters.length));

    }

    function randomBuzzWord() {
        const words = ["Scalability ", "Edge ", "AWS ", "AI-Generated ", "low-code ", "cloud ", "Agile ", "API ", "Web3.0 ", "Bicoin ", "NFT ", "Java ", "Blockchain "];
        return words[Math.floor(Math.random() * words.length)];

    }
</script>